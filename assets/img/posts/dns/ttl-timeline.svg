<svg width="800" height="300" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg" font-family="'Segoe UI',system-ui,sans-serif">
  <defs>
    <style>
      @keyframes fillR { from { width: 0; } to { width: 100%; } }
      @keyframes fadein { from { opacity:0; } to { opacity:1; } }
    </style>
    <linearGradient id="bg3" x1="0" y1="0" x2="1" y2="1" gradientUnits="objectBoundingBox">
      <stop offset="0%" stop-color="#fffbeb"/>
      <stop offset="100%" stop-color="#f8fafc"/>
    </linearGradient>
    <linearGradient id="redBar" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#e74c3c"/>
      <stop offset="100%" stop-color="#c0392b"/>
    </linearGradient>
    <linearGradient id="greenBar" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0%" stop-color="#27ae60"/>
      <stop offset="100%" stop-color="#1e8449"/>
    </linearGradient>
    <filter id="sh3">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#00000018"/>
    </filter>
  </defs>

  <rect width="800" height="300" fill="url(#bg3)"/>

  <!-- Title -->
  <text x="400" y="26" text-anchor="middle" fill="#1e293b" font-size="14" font-weight="700">TTL Propagation Lag: Why Your "Instant" Failover Took 28 Minutes</text>

  <!-- ── Timeline axis ── -->
  <!-- Axis line -->
  <line x1="60" y1="175" x2="760" y2="175" stroke="#cbd5e1" stroke-width="2"/>

  <!-- Time tick marks and labels -->
  <!-- 0:00 -->
  <line x1="80"  y1="170" x2="80"  y2="182" stroke="#64748b" stroke-width="1.5"/>
  <text x="80"  y="196" text-anchor="middle" fill="#64748b" font-size="9">0:00</text>
  <!-- 0:04 -->
  <line x1="200" y1="170" x2="200" y2="182" stroke="#64748b" stroke-width="1.5"/>
  <text x="200" y="196" text-anchor="middle" fill="#64748b" font-size="9">0:04</text>
  <!-- 0:09 -->
  <line x1="340" y1="170" x2="340" y2="182" stroke="#64748b" stroke-width="1.5"/>
  <text x="340" y="196" text-anchor="middle" fill="#64748b" font-size="9">0:09</text>
  <!-- 0:15 -->
  <line x1="490" y1="170" x2="490" y2="182" stroke="#64748b" stroke-width="1.5"/>
  <text x="490" y="196" text-anchor="middle" fill="#64748b" font-size="9">0:15</text>
  <!-- 0:28 -->
  <line x1="730" y1="170" x2="730" y2="182" stroke="#64748b" stroke-width="1.5"/>
  <text x="730" y="196" text-anchor="middle" fill="#64748b" font-size="9">0:28</text>

  <!-- ── Event markers ── -->
  <!-- 0:00: Primary fails + DNS updated -->
  <circle cx="80" cy="175" r="7" fill="#e74c3c" filter="url(#sh3)"/>
  <line x1="80" y1="168" x2="80" y2="130" stroke="#e74c3c" stroke-width="1.5" stroke-dasharray="3 2"/>
  <rect x="16" y="100" width="128" height="28" rx="6" fill="#fff0f0" stroke="#e74c3c" stroke-width="1.2" filter="url(#sh3)"/>
  <text x="80" y="113" text-anchor="middle" fill="#c0392b" font-size="9" font-weight="700">Primary fails.</text>
  <text x="80" y="124" text-anchor="middle" fill="#c0392b" font-size="9">DNS record updated.</text>

  <!-- 0:00: your laptop hits secondary (green dot, same x) -->
  <circle cx="80" cy="175" r="4" fill="white" stroke="#27ae60" stroke-width="2"/>
  <rect x="85" y="55" width="130" height="18" rx="5" fill="#f0fff4" stroke="#27ae60" stroke-width="1.2"/>
  <text x="150" y="67" text-anchor="middle" fill="#27ae60" font-size="9">Your laptop: OK ✓  (re-resolved)</text>
  <line x1="80" y1="168" x2="150" y2="74" stroke="#27ae60" stroke-width="1" stroke-dasharray="3 2"/>

  <!-- Red "still failing" band: 80 → 730 -->
  <rect x="80" y="145" width="650" height="18" rx="4" fill="url(#redBar)" opacity="0.18"/>
  <text x="405" y="158" text-anchor="middle" fill="#c0392b" font-size="9" font-weight="600">production traffic still hitting cached (old) address</text>

  <!-- 0:04: 80% still on primary -->
  <circle cx="200" cy="175" r="6" fill="#f39c12" filter="url(#sh3)"/>
  <line x1="200" y1="168" x2="200" y2="220" stroke="#f39c12" stroke-width="1.5" stroke-dasharray="3 2"/>
  <rect x="130" y="221" width="140" height="28" rx="6" fill="#fffbeb" stroke="#f39c12" stroke-width="1.2" filter="url(#sh3)"/>
  <text x="200" y="234" text-anchor="middle" fill="#92400e" font-size="9" font-weight="700">80% still on primary.</text>
  <text x="200" y="245" text-anchor="middle" fill="#92400e" font-size="9">Errors everywhere.</text>

  <!-- 0:09: caches start expiring -->
  <circle cx="340" cy="175" r="6" fill="#f39c12" filter="url(#sh3)"/>
  <line x1="340" y1="168" x2="340" y2="220" stroke="#f39c12" stroke-width="1.5" stroke-dasharray="3 2"/>
  <rect x="266" y="221" width="148" height="28" rx="6" fill="#fffbeb" stroke="#f39c12" stroke-width="1.2" filter="url(#sh3)"/>
  <text x="340" y="234" text-anchor="middle" fill="#92400e" font-size="9" font-weight="700">Caches start expiring.</text>
  <text x="340" y="245" text-anchor="middle" fill="#92400e" font-size="9">Traffic trickles to secondary.</text>

  <!-- Green "mostly resolved" band: 490 → 730 -->
  <rect x="490" y="145" width="240" height="18" rx="4" fill="url(#greenBar)" opacity="0.2"/>

  <!-- 0:15: majority on secondary -->
  <circle cx="490" cy="175" r="6" fill="#27ae60" filter="url(#sh3)"/>
  <line x1="490" y1="168" x2="490" y2="220" stroke="#27ae60" stroke-width="1.5" stroke-dasharray="3 2"/>
  <rect x="418" y="221" width="144" height="28" rx="6" fill="#f0fff4" stroke="#27ae60" stroke-width="1.2" filter="url(#sh3)"/>
  <text x="490" y="234" text-anchor="middle" fill="#166534" font-size="9" font-weight="700">Majority on secondary.</text>
  <text x="490" y="245" text-anchor="middle" fill="#166534" font-size="9">Errors subsiding.</text>

  <!-- 0:28: last stubborn resolver -->
  <circle cx="730" cy="175" r="7" fill="#27ae60" filter="url(#sh3)"/>
  <line x1="730" y1="168" x2="730" y2="130" stroke="#27ae60" stroke-width="1.5" stroke-dasharray="3 2"/>
  <rect x="614" y="100" width="152" height="28" rx="6" fill="#f0fff4" stroke="#27ae60" stroke-width="1.2" filter="url(#sh3)"/>
  <text x="690" y="113" text-anchor="middle" fill="#166534" font-size="9" font-weight="700">Last resolver re-resolves.</text>
  <text x="690" y="124" text-anchor="middle" fill="#166534" font-size="9">Incident window: 28 min.</text>

  <!-- Brace / bracket showing "TTL=300s window" -->
  <line x1="80"  y1="210" x2="80"  y2="215" stroke="#94a3b8" stroke-width="1.2"/>
  <line x1="730" y1="210" x2="730" y2="215" stroke="#94a3b8" stroke-width="1.2"/>

  <!-- Bottom note -->
  <text x="400" y="285" text-anchor="middle" fill="#94a3b8" font-size="9" font-style="italic">TTL=300s is the floor. Resolver non-compliance, negative caching, and forwarder chains push the real window far higher.</text>
</svg>
