<svg width="800" height="420" viewBox="0 -25 800 420" xmlns="http://www.w3.org/2000/svg" font-family="'Segoe UI',system-ui,sans-serif">
  <defs>
    <style>
      @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.3;} }
      .blink { animation: pulse 1.2s ease-in-out infinite; }
    </style>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1" gradientUnits="objectBoundingBox">
      <stop offset="0%" stop-color="#eef2ff"/>
      <stop offset="100%" stop-color="#f8fafc"/>
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#00000018"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect x="0" y="-25" width="800" height="420" fill="url(#bg)"/>

  <!-- Dot grid -->
  <g fill="#c7d2fe" opacity="0.4">
    <g id="dc">
      <circle cx="0" cy="0" r="1.5"/><circle cx="0" cy="40" r="1.5"/>
      <circle cx="0" cy="80" r="1.5"/><circle cx="0" cy="120" r="1.5"/>
      <circle cx="0" cy="160" r="1.5"/><circle cx="0" cy="200" r="1.5"/>
      <circle cx="0" cy="240" r="1.5"/><circle cx="0" cy="280" r="1.5"/>
      <circle cx="0" cy="320" r="1.5"/>
    </g>
    <use href="#dc" x="40"/><use href="#dc" x="80"/><use href="#dc" x="120"/>
    <use href="#dc" x="160"/><use href="#dc" x="200"/><use href="#dc" x="240"/>
    <use href="#dc" x="280"/><use href="#dc" x="320"/><use href="#dc" x="360"/>
    <use href="#dc" x="400"/><use href="#dc" x="440"/><use href="#dc" x="480"/>
    <use href="#dc" x="520"/><use href="#dc" x="560"/><use href="#dc" x="600"/>
    <use href="#dc" x="640"/><use href="#dc" x="680"/><use href="#dc" x="720"/>
    <use href="#dc" x="760"/>
  </g>

  <!-- ══ DC boxes at top ══ -->

  <!-- DC-A (degraded) -->
  <rect x="20" y="5" width="190" height="72" rx="10" fill="#fff0f0" stroke="#e74c3c" stroke-width="2" filter="url(#shadow)"/>
  <path d="M32,5 L198,5 Q210,5 210,17 L210,32 L20,32 L20,17 Q20,5 32,5 Z" fill="#e74c3c"/>
  <text x="115" y="23" text-anchor="middle" fill="white" font-size="10" font-weight="700">Datacenter A</text>
  <text x="115" y="47" text-anchor="middle" fill="#c0392b" font-size="9" font-weight="600">degraded · returning 5xx</text>
  <text x="115" y="62" text-anchor="middle" fill="#e74c3c" font-size="8" font-style="italic">should drain traffic</text>

  <!-- DC-B (healthy) -->
  <rect x="590" y="5" width="190" height="72" rx="10" fill="#f0fff4" stroke="#27ae60" stroke-width="2" filter="url(#shadow)"/>
  <path d="M602,5 L768,5 Q780,5 780,17 L780,32 L590,32 L590,17 Q590,5 602,5 Z" fill="#27ae60"/>
  <text x="685" y="23" text-anchor="middle" fill="white" font-size="10" font-weight="700">Datacenter B</text>
  <text x="685" y="47" text-anchor="middle" fill="#166534" font-size="9" font-weight="600">healthy · full capacity</text>
  <text x="685" y="62" text-anchor="middle" fill="#27ae60" font-size="8" font-style="italic">should receive all traffic</text>

  <!-- DNS update event badge -->
  <rect x="255" y="12" width="290" height="55" rx="10" fill="white" stroke="#4f8ef7" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="400" y="30" text-anchor="middle" fill="#1d4ed8" font-size="9" font-weight="700">DNS updated at T = 0</text>
  <text x="400" y="46" text-anchor="middle" fill="#374151" font-size="8.5">DC-A records removed from response</text>
  <text x="400" y="60" text-anchor="middle" fill="#94a3b8" font-size="8" font-style="italic">but resolvers across the fleet still have cached answers</text>

  <!-- ══ Traffic bar chart ══ -->

  <!-- Legend -->
  <rect x="180" y="93" width="12" height="10" rx="2" fill="#e74c3c"/>
  <text x="196" y="103" fill="#374151" font-size="8.5">DC-A (degraded)</text>
  <rect x="320" y="93" width="12" height="10" rx="2" fill="#4f8ef7"/>
  <text x="336" y="103" fill="#374151" font-size="8.5">DC-B (healthy)</text>
  <text x="610" y="103" fill="#94a3b8" font-size="8" font-style="italic">bar = share of incoming traffic</text>

  <!-- Bar area: x=155 to x=745, width=590 -->
  <!-- Bar rows: y=115, 160, 205, 250  height=32 each -->

  <!-- ── Row 1: T = 0 (DNS just updated) ── -->
  <text x="145" y="130" text-anchor="end" fill="#374151" font-size="9" font-weight="600">T = 0</text>
  <text x="145" y="143" text-anchor="end" fill="#64748b" font-size="7.5" font-style="italic">DNS updated</text>
  <!-- DC-A: 50% = 295px -->
  <rect x="155" y="114" width="295" height="32" rx="4" fill="#e74c3c" opacity="0.85"/>
  <text x="302" y="134" text-anchor="middle" fill="white" font-size="9" font-weight="700">DC-A: 50%</text>
  <!-- DC-B: 50% = 295px -->
  <rect x="450" y="114" width="295" height="32" rx="4" fill="#4f8ef7" opacity="0.85"/>
  <text x="597" y="134" text-anchor="middle" fill="white" font-size="9" font-weight="700">DC-B: 50%</text>
  <text x="752" y="131" fill="#94a3b8" font-size="8" font-style="italic">resolvers still cached</text>

  <!-- ── Row 2: T = 3min ── -->
  <text x="145" y="172" text-anchor="end" fill="#374151" font-size="9" font-weight="600">T = 3min</text>
  <text x="145" y="185" text-anchor="end" fill="#64748b" font-size="7.5" font-style="italic">some TTLs expire</text>
  <!-- DC-A: 35% = 207px -->
  <rect x="155" y="159" width="207" height="32" rx="4" fill="#e74c3c" opacity="0.7"/>
  <text x="258" y="179" text-anchor="middle" fill="white" font-size="9" font-weight="700">DC-A: 35%</text>
  <!-- DC-B: 65% = 383px -->
  <rect x="362" y="159" width="383" height="32" rx="4" fill="#4f8ef7" opacity="0.85"/>
  <text x="553" y="179" text-anchor="middle" fill="white" font-size="9" font-weight="700">DC-B: 65%</text>
  <text x="752" y="176" fill="#94a3b8" font-size="8" font-style="italic">partial drain</text>

  <!-- ── Row 3: T = 8min ── -->
  <text x="145" y="217" text-anchor="end" fill="#374151" font-size="9" font-weight="600">T = 8min</text>
  <text x="145" y="230" text-anchor="end" fill="#64748b" font-size="7.5" font-style="italic">most TTLs expire</text>
  <!-- DC-A: 15% = 89px -->
  <rect x="155" y="204" width="89" height="32" rx="4" fill="#e74c3c" opacity="0.55"/>
  <text x="199" y="224" text-anchor="middle" fill="white" font-size="8.5" font-weight="700">15%</text>
  <!-- DC-B: 85% = 501px -->
  <rect x="244" y="204" width="501" height="32" rx="4" fill="#4f8ef7" opacity="0.85"/>
  <text x="494" y="224" text-anchor="middle" fill="white" font-size="9" font-weight="700">DC-B: 85%</text>
  <text x="752" y="221" fill="#94a3b8" font-size="8" font-style="italic">still draining</text>

  <!-- ── Row 4: T = 20min ── -->
  <text x="145" y="262" text-anchor="end" fill="#374151" font-size="9" font-weight="600">T = 20min</text>
  <text x="145" y="275" text-anchor="end" fill="#64748b" font-size="7.5" font-style="italic">all TTLs expired</text>
  <!-- DC-A: 0% -->
  <rect x="155" y="249" width="590" height="32" rx="4" fill="#4f8ef7" opacity="0.9"/>
  <text x="450" y="269" text-anchor="middle" fill="white" font-size="9" font-weight="700">DC-B: 100%  —  drain complete</text>
  <!-- Small DC-A label at left -->
  <text x="160" y="268" fill="white" font-size="8" opacity="0.7">DC-A: 0%</text>
  <text x="752" y="266" fill="#27ae60" font-size="8" font-weight="600">✓  done</text>

  <!-- 20-minute window bracket -->
  <line x1="750" y1="114" x2="750" y2="281" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3 3"/>
  <text x="756" y="200" text-anchor="middle" fill="#e74c3c" font-size="8" font-weight="600" transform="rotate(90 756 200)">← 20 min drain window →</text>

  <!-- Caption -->
  <line x1="200" y1="315" x2="600" y2="315" stroke="#e2e8f0" stroke-width="1"/>
  <text x="400" y="332" text-anchor="middle" fill="#1e293b" font-size="12" font-weight="700" font-family="Georgia,serif" font-style="italic">"DNS has no drain mechanism."</text>
  <text x="400" y="348" text-anchor="middle" fill="#94a3b8" font-size="9" font-style="italic">Traffic shifts happen at resolver expiry, not on command. You cannot see or control the drain rate.</text>
</svg>
